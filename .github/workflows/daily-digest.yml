name: ğŸ“° AI Daily Digest

on:
  # æ¯æœ JST 7:00 (UTC 22:00) ã«å®Ÿè¡Œ
  schedule:
    - cron: '0 22 * * *'
  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
  workflow_dispatch:

permissions:
  issues: write
  contents: read

jobs:
  create-digest-issue:
    runs-on: ubuntu-latest
    steps:
      - name: æ—¥ä»˜ã‚’å–å¾—
        id: date
        run: |
          # JST (UTC+9) ã®æ—¥ä»˜ã‚’å–å¾—
          echo "today=$(TZ=Asia/Tokyo date +'%Y-%m-%d')" >> $GITHUB_OUTPUT
          echo "year=$(TZ=Asia/Tokyo date +'%Y')" >> $GITHUB_OUTPUT
          echo "month=$(TZ=Asia/Tokyo date +'%m')" >> $GITHUB_OUTPUT
          echo "day=$(TZ=Asia/Tokyo date +'%d')" >> $GITHUB_OUTPUT

      - name: Daily Digest Issue ã‚’ä½œæˆ
        uses: actions/github-script@v7
        with:
          script: |
            const today = '${{ steps.date.outputs.today }}';
            
            const title = `ğŸ“° AI Daily Digest - ${today}`;
            const body = `# ğŸ¤– AI News Daily Digest

            ## åé›†å¯¾è±¡æ—¥
            ${today}

            ## åé›†å¯¾è±¡ã‚µã‚¤ãƒˆ
            1. **MIT Technology Review** - https://www.technologyreview.com/topic/artificial-intelligence/
            2. **VentureBeat AI** - https://venturebeat.com/category/ai/
            3. **TechCrunch AI** - https://techcrunch.com/tag/artificial-intelligence/
            4. **The Verge AI** - https://www.theverge.com/artificial-intelligence
            5. **Towards Data Science** - https://towardsdatascience.com/

            ## å‡ºåŠ›å½¢å¼
            - å„ã‚µã‚¤ãƒˆã‹ã‚‰1-2ä»¶ã®é‡è¦è¨˜äº‹ã‚’é¸å®š
            - æ—¥æœ¬èªã§è¦ç´„ã‚’ä½œæˆ
            - 10åˆ†ã§èª­ã‚ã‚‹åˆ†é‡ï¼ˆç´„2000-3000æ–‡å­—ï¼‰
            - å®Ÿè·µçš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’å«ã‚ã‚‹

            ## å‡ºåŠ›å…ˆ
            \`daily/${today}.md\`

            ---

            @copilot ä¸Šè¨˜ã®åé›†å¯¾è±¡ã‚µã‚¤ãƒˆã‹ã‚‰æœ€æ–°ã®AIé–¢é€£ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’åé›†ã—ã€è¦ç´„ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚`;

            try {
              const issue = await github.rest.issues.create({
                owner: context.repo.owner,
                repo: context.repo.repo,
                title: title,
                body: body,
                labels: ['copilot']
              });
              console.log(`Issue created: ${issue.data.html_url}`);
            } catch (error) {
              console.error('Error creating issue:', error);
              throw error;
            }
